---
title: "Gov 51 - Pset 1"
author: "Tyler Dang - https://github.com/tylerdang25/Gov-51---PSet-1.git"
format: pdf
editor: visual
---

## 2. Get to Know Your Data

```{r}
library(tidyverse)
library(dplyr)
library(knitr)
```

```{r}
acs2024 <- read.csv('/Users/tyler/Documents/Gov 51/gov51-ps1/data/raw/acs2024.csv')
```

FROM THE DOCUMENTATION:

TRANTIME reports the total amount of time, in minutes, that it usually took the respondent to get from home to work last week.

A 000 for TRANTIME represents cases in which there is no data available for that observation.

PERWT indicates how many persons in the U.S. population are represented by a given person in an IPUMS sample. Basically, for each observation in this data set, the PERWT value indicates how many real people in the U.S. population are represented by that observation.

```{r}
acs2024 <- acs2024 %>% 
  mutate(female = ifelse(SEX == 2, 1, 0))

acs2024 <- acs2024 %>% 
  mutate(educ_lhs = ifelse(EDUC %in% 1:5, 1, 0),
    educ_hs = ifelse(EDUC == 6, 1, 0),
    educ_somecol = ifelse(EDUC %in% 07:09, 1, 0),
    educ_college = ifelse(EDUC == 10, 1, 0),
    educ_adv = ifelse(EDUC == 11, 1, 0))

acs2024 <- acs2024 %>% 
  mutate(employed = ifelse(EMPSTAT == 1, 1, 0),
    unemployed = ifelse(EMPSTAT == 2, 1, 0),
    nlf = ifelse(EMPSTAT == 3, 1, 0))
```

If we included special codes that represent "N/A" codes, we may accidentally misreport in summary statistics the extent that a certain population appears. For example, if we included 0 as a part of the range for education less than high school, we would drastically increase the extent that those with an education level less than high school make up the data set instead of accurately showing that the information may just be missing.

```{r}

acs2024table <- data.frame(
  Variable = c("Age", "Female", "Less than High School", "High School Only", 
               "Some College", "College Only", "Advanced Degree", "Employed", 
               "Unemployed", "Not in Labor Force", "Commute Time (mins)", 
               "Total Income ($)"),
  
  N = c(length(acs2024$AGE), length(acs2024$female),length(acs2024$educ_lhs), 
        length(acs2024$educ_hs), length(acs2024$educ_somecol), 
        length(acs2024$educ_college), length(acs2024$educ_adv),
        length(acs2024$employed), length(acs2024$unemployed),
        length(acs2024$nlf), length(acs2024$TRANTIME), length(acs2024$INCTOT)),
  
  Mean = c(mean(acs2024$AGE), mean(acs2024$female), mean(acs2024$educ_lhs), 
           mean(acs2024$educ_hs), mean(acs2024$educ_somecol), 
           mean(acs2024$educ_college), mean(acs2024$educ_adv),
           mean(acs2024$employed), mean(acs2024$unemployed),mean(acs2024$nlf),
           mean(acs2024$TRANTIME), mean(acs2024$INCTOT) / 1e6),
  
  Med = c(median(acs2024$AGE), median(acs2024$female), 
             median(acs2024$educ_lhs), median(acs2024$educ_hs), 
             median(acs2024$educ_somecol), median(acs2024$educ_college), 
             median(acs2024$educ_adv),median(acs2024$employed), 
             median(acs2024$unemployed),median(acs2024$nlf),
             median(acs2024$TRANTIME), median(acs2024$INCTOT) / 1e6),
  
  SD = c(sd(acs2024$AGE), sd(acs2024$female),sd(acs2024$educ_lhs), 
         sd(acs2024$educ_hs), sd(acs2024$educ_somecol), 
         sd(acs2024$educ_college), sd(acs2024$educ_adv), sd(acs2024$employed), 
         sd(acs2024$unemployed),sd(acs2024$nlf), sd(acs2024$TRANTIME), 
         sd(acs2024$INCTOT) / 1e6),
  
  Min = c(min(acs2024$AGE), min(acs2024$female), min(acs2024$educ_lhs), 
          min(acs2024$educ_hs), min(acs2024$educ_somecol), 
          min(acs2024$educ_college), min(acs2024$educ_adv),
          min(acs2024$employed), min(acs2024$unemployed), min(acs2024$nlf),
          min(acs2024$TRANTIME), min(acs2024$INCTOT) / 1e6),
  
  Max = c(max(acs2024$AGE), max(acs2024$female),max(acs2024$educ_lhs), 
          max(acs2024$educ_hs), max(acs2024$educ_somecol), 
          max(acs2024$educ_college), max(acs2024$educ_adv),
          max(acs2024$employed), max(acs2024$unemployed), max(acs2024$nlf),
          max(acs2024$TRANTIME), max(acs2024$INCTOT) / 1e6)
)

#acs2024table
acs2024rounded <- acs2024table
acs2024rounded[, -1] <- round(acs2024table[, -1], 2)
#acs2024rounded

knitr::kable(acs2024rounded, 
             caption = "Summary Statistics for 2024 ACS Sample",
             digits = 2)
```

The maximum daily commute time of 195 minutes or 3.25 hours can make sense for a daily commute. The statistic means that the max reported commute from home to work was 195 minutes, and though this is not very practical for most workers, it is possible for the commute to be made daily. However, with a commute of more than 3 hours, that is 6 total hours daily in commute which leaves little time for rest and other necessary actions in the course of one's day.

## 3. Who Should Be in Your Analysis

```{r}
#1a
acs20241 <- acs2024 %>%
  filter(TRANTIME == 0)

acs20241 %>% 
  summarise("Number of TRANTIME == 0" = n())

acs2024 %>% 
  summarise("Total Observations" = n())

Percentage1a <- mean(acs2024$TRANTIME == 0, na.rm = TRUE) *100
Percentage1a

#1b
acs20241 %>% 
  filter(unemployed == 1) %>% 
  summarise("Number of Unemployed" = n())

acs20241 %>% 
  filter(nlf == 1) %>% 
  summarise("Number of those Not in Labor Force" = n())

acs20241 %>% 
  filter(employed == 0) %>%
  filter(nlf == 0) %>%
  filter(unemployed == 0) %>% 
  summarise("Number of People not reported as Employed, Unemployed, or in Labor Force" 
            = n())
```

The number of people with a TRANTIME of 0 is 2062945 for a rate of 60.27% Of these people, includes those who are unemployed (72315), not even in the labor force (1192654), or not employed, unemployed, or not in labor force (549898) which would occur from a N/A in EMPSTAT.

```{r}
commuters <- acs2024 %>%
  filter(employed ==1)
```

To analyze only people that are considered commuters, we simply just filter for those considered "Employed" as those that are unemployed or not in the labor force would not have a commute. Furthermore, by just allowing those who are determined as "Employed" in the new subset, we eliminate any possibilities in which people were ineligible or given an N/A for employment status.

```{r}
commuters %>%
  summarise("Total" = n())

commuters %>% 
  summarise("Minimum Value" = min(TRANTIME))
```

After filtering for only those that would have a commute time, we have 248087 observations. The minimum, however, remains at 0. This still makes sense as those who might be self employed or live extremely close to their workplace would have a commute that is less than 1 minute.

```{r}
#reporting the employment status was omitted due to the filtering of commuters
commuterstable <- data.frame(
  Variable = c("Age", "Female", "Less than High School", "High School Only", 
               "Some College", "College Only", "Advanced Degree", 
               "Commute Time (mins)", "Total Income ($)"),
  
  N = c(length(commuters$AGE), length(commuters$female),
        length(commuters$educ_lhs), 
        length(commuters$educ_hs), length(commuters$educ_somecol), 
        length(commuters$educ_college), length(commuters$educ_adv),
        length(commuters$TRANTIME), length(commuters$INCTOT)),
  
  Mean = c(mean(commuters$AGE), mean(commuters$female), mean(commuters$educ_lhs),
           mean(commuters$educ_hs), mean(commuters$educ_somecol), 
           mean(commuters$educ_college), mean(commuters$educ_adv),
           mean(commuters$TRANTIME), mean(commuters$INCTOT) / 1e6),
  
    Med = c(median(commuters$AGE), median(commuters$female), 
            median(commuters$educ_lhs), median(commuters$educ_hs), 
            median(commuters$educ_somecol), median(commuters$educ_college), 
            median(commuters$educ_adv), median(commuters$TRANTIME), 
            median(commuters$INCTOT) / 1e6),
  
  SD = c(sd(commuters$AGE), sd(commuters$female),sd(commuters$educ_lhs), 
         sd(commuters$educ_hs), sd(commuters$educ_somecol), 
         sd(commuters$educ_college), sd(commuters$educ_adv), 
         sd(commuters$TRANTIME), sd(commuters$INCTOT) / 1e6),
  
  Min = c(min(commuters$AGE), min(commuters$female), min(commuters$educ_lhs), 
          min(commuters$educ_hs), min(commuters$educ_somecol), 
          min(commuters$educ_college), min(commuters$educ_adv),
          min(commuters$TRANTIME), min(commuters$INCTOT) / 1e6),
  
  Max = c(max(commuters$AGE), max(commuters$female), max(commuters$educ_lhs), 
          max(commuters$educ_hs), max(commuters$educ_somecol), 
          max(commuters$educ_college), max(commuters$educ_adv),
          max(commuters$TRANTIME), max(commuters$INCTOT) / 1e6)
)

#commuterstable
commutersrounded <- commuterstable
commutersrounded[, -1] <- round(commuterstable[, -1], 2)
#acs2024rounded

knitr::kable(commutersrounded, 
             caption = "Summary Statistics for 2024 ACS Commuters Sample",
             digits = 2)
```

## 4. Visualize and Interpret

```{r}
commutersplot <- commuters %>%
  ggplot(mapping = aes(x = TRANTIME),) +
  geom_histogram(binwidth = 5, fill = "steelblue", color = "white") + 
  scale_y_continuous(labels = scales::label_number()) +
  labs(x = "Daily Commute Time (minutes)",
       y = "Number of Observations",
       title = "Daily Commute Time in Minutes for the Employed Respondents \n in the ACS2024 Data Set")

commutersplot

ggsave ("output/commute_histogram.png" ,
        plot = commutersplot,width = 8 , height = 5)

```

Based upon the histogram above, it is clear that commute time is left skewed with a center at 20 minutes, with a minimum of 0 minutes and a maximum of 195. There is a spike from the mid 50 minutes to an hour. This can be explained by respondents rounding their commute times to a flat hour.

Comparing our two tables (one of the entire 2024 ACS dataset and the second of the filtered commuters subset), it is immediately clear that the subset that omits observations that would not actually have a recorded commute time leads to an increase in the mean and median time relative to those of the initial dataset.

From this fact (and the shape of the commuters distribution above) we know that the dataset distribution would be much more skewed left with an even higher peak at 0 minutes.

